#!/bin/bash
# Pre-commit hook for flu project

set -e

echo "ğŸ” Running pre-commit checks..."

# Format check
echo "  â†’ Checking formatting..."
if ! cargo fmt -- --check; then
    echo "âŒ Format issues found. Run: cargo fmt"
    exit 1
fi

# Clippy (allow cargo lints)
echo "  â†’ Running clippy..."
if ! cargo clippy --all-targets --all-features -- -D warnings -A clippy::cargo; then
    echo "âŒ Clippy warnings found"
    exit 1
fi

# Tests (lib only for speed)
echo "  â†’ Running tests..."
if ! cargo test --lib --all; then
    echo "âŒ Tests failed"
    exit 1
fi

echo "âœ… All pre-commit checks passed"
